<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TarÄ±msal Faaliyet SimÃ¼lasyonu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #A0522D 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c1810;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 248, 240, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #6B4423 0%, #8B5A3C 100%);
            color: #fff;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #CD853F;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #D2B48C;
            border-bottom: 3px solid #8B4513;
        }

        .nav-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: #D2B48C;
            color: #6B4423;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            border-right: 1px solid #A0522D;
        }

        .nav-tab:hover {
            background: #C19A6B;
        }

        .nav-tab.active {
            background: #8B4513;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .content {
            padding: 40px;
        }

        .section {
            background: white;
            padding: 30px;
            margin-bottom: 25px;
            border-radius: 15px;
            border-left: 5px solid #8B4513;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.1);
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            color: #6B4423;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #D2691E;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            color: #6B4423;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #D2B48C;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: #FFF8DC;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #8B4513;
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-top: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(139, 69, 19, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #D2691E 0%, #CD853F 100%);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(210, 105, 30, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #228B22 0%, #32CD32 100%);
            color: white;
        }

        .btn-code {
            background: linear-gradient(135deg, #4B0082 0%, #8A2BE2 100%);
            color: white;
        }

        .error-message {
            background: #FFE4E1;
            color: #DC143C;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #DC143C;
            display: none;
        }

        .info-box {
            background: linear-gradient(135deg, #FFF8DC 0%, #FAEBD7 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #DAA520;
        }

        .info-box h3 {
            color: #8B4513;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #6B4423;
            line-height: 1.6;
        }

        .mahsul-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .mahsul-card {
            background: linear-gradient(135deg, #FFF8DC 0%, #F5DEB3 100%);
            padding: 20px;
            border-radius: 15px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mahsul-card:hover {
            transform: translateY(-5px);
            border-color: #8B4513;
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.2);
        }

        .mahsul-card.selected {
            border-color: #8B4513;
            background: linear-gradient(135deg, #DAA520 0%, #FFD700 100%);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
        }

        .mahsul-card h3 {
            color: #6B4423;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .mahsul-card .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .mahsul-card .info {
            font-size: 0.9em;
            color: #8B4513;
            margin-top: 10px;
        }

        .simulation-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .simulation-output::-webkit-scrollbar {
            width: 10px;
        }

        .simulation-output::-webkit-scrollbar-track {
            background: #333;
            border-radius: 10px;
        }

        .simulation-output::-webkit-scrollbar-thumb {
            background: #8B4513;
            border-radius: 10px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            overflow-x: auto;
            margin: 20px 0;
            border: 2px solid #8B4513;
            position: relative;
        }

        .code-block::-webkit-scrollbar {
            height: 10px;
        }

        .code-block::-webkit-scrollbar-track {
            background: #1e1e1e;
            border-radius: 10px;
        }

        .code-block::-webkit-scrollbar-thumb {
            background: #8B4513;
            border-radius: 10px;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 15px;
            background: #8B4513;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #A0522D;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #D2B48C;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B4513 0%, #CD853F 50%, #DAA520 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #FFF8DC 0%, #F5DEB3 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #D2691E;
        }

        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #8B4513;
            margin: 10px 0;
        }

        .stat-card .label {
            color: #6B4423;
            font-size: 0.9em;
        }

        .weather-widget {
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 100%);
            padding: 15px;
            border-radius: 10px;
            color: white;
            margin: 15px 0;
        }

        .weather-icon {
            font-size: 2.5em;
        }

        .weather-info {
            flex: 1;
        }

        .history-item {
            background: linear-gradient(135deg, #FFF8DC 0%, #FAEBD7 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #8B4513;
        }

        .history-item h4 {
            color: #6B4423;
            margin-bottom: 10px;
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 10px;
        }

        .badge-success {
            background: #90EE90;
            color: #228B22;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal-content h2 {
            color: #8B4513;
            margin-bottom: 20px;
        }

        .spinner {
            border: 5px solid #D2B48C;
            border-top: 5px solid #8B4513;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .python-syntax .keyword {
            color: #ff79c6;
            font-weight: bold;
        }

        .python-syntax .function {
            color: #50fa7b;
        }

        .python-syntax .string {
            color: #f1fa8c;
        }

        .python-syntax .comment {
            color: #6272a4;
            font-style: italic;
        }

        .python-syntax .number {
            color: #bd93f9;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .mahsul-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                border-right: none;
                border-bottom: 1px solid #A0522D;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒ¾ TarÄ±msal Faaliyet SimÃ¼lasyonu</h1>
            <p>Versiyon 2.0 - Python & Web UygulamasÄ±</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('tab-simulation')">
                ğŸšœ SimÃ¼lasyon
            </button>
            <button class="nav-tab" onclick="switchTab('tab-python')">
                ğŸ Python Kodu
            </button>
        </div>

        <!-- SÄ°MÃœLASYON SEKMESÄ° -->
        <div id="tab-simulation" class="tab-content active">
            <div class="content">
                <!-- KullanÄ±cÄ± Bilgisi BÃ¶lÃ¼mÃ¼ -->
                <div id="section-user" class="section active">
                    <h2 class="section-title">
                        <span>ğŸ‘¤</span>
                        KullanÄ±cÄ± Bilgileri
                    </h2>
                    <div class="error-message" id="error-user"></div>
                    <div class="form-group">
                        <label for="userName">AdÄ±nÄ±z SoyadÄ±nÄ±z:</label>
                        <input type="text" id="userName" placeholder="Ã–rn: Halil ARSLAN" required>
                    </div>
                    <button class="btn btn-primary" onclick="validateUser()">Devam Et â†’</button>
                </div>

                <!-- Tarla Bilgileri BÃ¶lÃ¼mÃ¼ -->
                <div id="section-field" class="section">
                    <h2 class="section-title">
                        <span>ğŸ“</span>
                        Tarla Bilgileri
                    </h2>
                    <div class="error-message" id="error-field"></div>
                    <div class="info-box">
                        <h3>ğŸ“‹ Bilgi</h3>
                        <p>TarlanÄ±zÄ±n Ã¶lÃ§Ã¼lerini metre cinsinden giriniz. Sistem otomatik olarak dekar ve hektar hesaplamasÄ± yapacaktÄ±r.</p>
                    </div>
                    <div class="form-group">
                        <label for="fieldLength">Tarla UzunluÄŸu (metre):</label>
                        <input type="number" id="fieldLength" placeholder="Ã–rn: 100" min="1" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="fieldWidth">Tarla GeniÅŸliÄŸi (metre):</label>
                        <input type="number" id="fieldWidth" placeholder="Ã–rn: 50" min="1" step="0.1" required>
                    </div>
                    <div id="fieldCalculations" style="display: none;">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="label">Alan (mÂ²)</div>
                                <div class="value" id="areaM2">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">Alan (Dekar)</div>
                                <div class="value" id="areaDekar">0</div>
                            </div>
                            <div class="stat-card">
                                <div class="label">Alan (Hektar)</div>
                                <div class="value" id="areaHektar">0</div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="goToSection('section-user')">â† Geri</button>
                    <button class="btn btn-primary" onclick="calculateField()">Hesapla</button>
                    <button class="btn btn-primary" id="btnFieldNext" style="display: none;" onclick="goToSection('section-crop')">Devam Et â†’</button>
                </div>

                <!-- Mahsul SeÃ§imi BÃ¶lÃ¼mÃ¼ -->
                <div id="section-crop" class="section">
                    <h2 class="section-title">
                        <span>ğŸŒ±</span>
                        Mahsul SeÃ§imi
                    </h2>
                    <div class="error-message" id="error-crop"></div>
                    <div class="info-box">
                        <h3>ğŸ“‹ Bilgi</h3>
                        <p>YetiÅŸtirmek istediÄŸiniz mahsulÃ¼ seÃ§iniz. Her mahsulÃ¼n farklÄ± hasat sÃ¼resi ve verim oranlarÄ± bulunmaktadÄ±r.</p>
                    </div>
                    <div class="mahsul-grid">
                        <div class="mahsul-card" onclick="selectCrop(1)">
                            <div class="icon">ğŸŒ¾</div>
                            <h3>BuÄŸday</h3>
                            <div class="info">
                                <p>Hasat: 120 gÃ¼n</p>
                                <p>Verim: 450 kg/dekar</p>
                            </div>
                        </div>
                        <div class="mahsul-card" onclick="selectCrop(2)">
                            <div class="icon">ğŸŒ½</div>
                            <h3>MÄ±sÄ±r</h3>
                            <div class="info">
                                <p>Hasat: 90 gÃ¼n</p>
                                <p>Verim: 600 kg/dekar</p>
                            </div>
                        </div>
                        <div class="mahsul-card" onclick="selectCrop(3)">
                            <div class="icon">ğŸ…</div>
                            <h3>Domates</h3>
                            <div class="info">
                                <p>Hasat: 75 gÃ¼n</p>
                                <p>Verim: 800 kg/dekar</p>
                            </div>
                        </div>
                        <div class="mahsul-card" onclick="selectCrop(4)">
                            <div class="icon">ğŸ¥”</div>
                            <h3>Patates</h3>
                            <div class="info">
                                <p>Hasat: 100 gÃ¼n</p>
                                <p>Verim: 550 kg/dekar</p>
                            </div>
                        </div>
                        <div class="mahsul-card" onclick="selectCrop(5)">
                            <div class="icon">ğŸŒ¾</div>
                            <h3>Arpa</h3>
                            <div class="info">
                                <p>Hasat: 110 gÃ¼n</p>
                                <p>Verim: 400 kg/dekar</p>
                            </div>
                        </div>
                        <div class="mahsul-card" onclick="selectCrop(6)">
                            <div class="icon">â˜ï¸</div>
                            <h3>Pamuk</h3>
                            <div class="info">
                                <p>Hasat: 150 gÃ¼n</p>
                                <p>Verim: 350 kg/dekar</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="goToSection('section-field')">â† Geri</button>
                    <button class="btn btn-primary" id="btnCropNext" style="display: none;" onclick="goToSection('section-speed')">Devam Et â†’</button>
                </div>

                <!-- SimÃ¼lasyon HÄ±zÄ± BÃ¶lÃ¼mÃ¼ -->
                <div id="section-speed" class="section">
                    <h2 class="section-title">
                        <span>âš¡</span>
                        SimÃ¼lasyon HÄ±zÄ±
                    </h2>
                    <div class="error-message" id="error-speed"></div>
                    <div class="info-box">
                        <h3>ğŸ“‹ Bilgi</h3>
                        <p>SimÃ¼lasyonun ne kadar detaylÄ± Ã§alÄ±ÅŸmasÄ±nÄ± istediÄŸinizi seÃ§iniz.</p>
                    </div>
                    <div class="form-group">
                        <label for="simSpeed">SimÃ¼lasyon HÄ±zÄ±:</label>
                        <select id="simSpeed" required>
                            <option value="">SeÃ§iniz...</option>
                            <option value="1">DetaylÄ± (Her gÃ¼n ayrÄ± gÃ¶sterilir)</option>
                            <option value="2">HÄ±zlÄ± (Sadece Ã¶nemli gÃ¼nler)</option>
                            <option value="3">Ã–zet (Sadece haftalÄ±k Ã¶zetler)</option>
                        </select>
                    </div>
                    <button class="btn btn-secondary" onclick="goToSection('section-crop')">â† Geri</button>
                    <button class="btn btn-primary" onclick="goToSection('section-summary')">Devam Et â†’</button>
                </div>

                <!-- Ã–zet ve Onay BÃ¶lÃ¼mÃ¼ -->
                <div id="section-summary" class="section">
                    <h2 class="section-title">
                        <span>ğŸ“Š</span>
                        SimÃ¼lasyon Ã–zeti
                    </h2>
                    <div class="info-box">
                        <h3>âœ… Bilgileriniz OnaylanÄ±yor</h3>
                        <div id="summaryContent"></div>
                    </div>
                    <button class="btn btn-secondary" onclick="goToSection('section-speed')">â† Geri</button>
                    <button class="btn btn-success" onclick="startSimulation()">SimÃ¼lasyonu BaÅŸlat ğŸš€</button>
                </div>

                <!-- SimÃ¼lasyon BÃ¶lÃ¼mÃ¼ -->
                <div id="section-simulation" class="section">
                    <h2 class="section-title">
                        <span>ğŸšœ</span>
                        SimÃ¼lasyon Ã‡alÄ±ÅŸÄ±yor
                    </h2>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar">0%</div>
                    </div>

                    <div class="weather-widget" id="currentWeather" style="display: none;">
                        <div class="weather-icon" id="weatherIcon">â˜€ï¸</div>
                        <div class="weather-info">
                            <div id="weatherDesc">GÃ¼neÅŸli</div>
                            <div id="weatherDay">GÃ¼n: 1</div>
                        </div>
                        <div class="weather-info">
                            <div id="weatherEffect">Verimlilik: %100</div>
                        </div>
                    </div>

                    <div class="simulation-output" id="simulationOutput"></div>

                    <div id="harvestResult" style="display: none;">
                        <div class="info-box" style="background: linear-gradient(135deg, #90EE90 0%, #98FB98 100%); border-color: #228B22;">
                            <h3>ğŸ‰ HASAT BAÅARILI!</h3>
                            <div id="harvestDetails"></div>
                        </div>
                        <button class="btn btn-primary" onclick="goToSection('section-stats')">Ä°statistikleri GÃ¶r â†’</button>
                        <button class="btn btn-success" onclick="resetSimulation()">Yeni SimÃ¼lasyon BaÅŸlat ğŸ”„</button>
                    </div>
                </div>

                <!-- Ä°statistikler BÃ¶lÃ¼mÃ¼ -->
                <div id="section-stats" class="section">
                    <h2 class="section-title">
                        <span>ğŸ“ˆ</span>
                        Genel Ä°statistikler
                    </h2>
                    <div id="statsContent"></div>
                    <button class="btn btn-success" onclick="resetSimulation()">Yeni SimÃ¼lasyon BaÅŸlat ğŸ”„</button>
                </div>
            </div>
        </div>

        <!-- PYTHON KODU SEKMESÄ° -->
        <div id="tab-python" class="tab-content">
            <div class="content">
                <div class="section active">
                    <h2 class="section-title">
                        <span>ğŸ</span>
                        Python Kaynak Kodu
                    </h2>
                    
                    <div class="info-box">
                        <h3>ğŸ“ AÃ§Ä±klama</h3>
                        <p>Bu web uygulamasÄ±, aÅŸaÄŸÄ±daki Python kodunun tam JavaScript Ã§evirisidir. TÃ¼m Python yapÄ±larÄ± (if-elif-else, for, while, try-except, def, input validasyonlarÄ±, tip dÃ¶nÃ¼ÅŸÃ¼mleri) web versiyonunda da mevcuttur.</p>
                        <p><strong>Python Ã–zellikleri:</strong> Type conversion (int, float, string), Boolean deÄŸerler, DÃ¶ngÃ¼ler (for, while), KoÅŸullar (if-elif-else), Fonksiyonlar (def), Hata yakalama (try-except), Input validasyonlarÄ±</p>
                    </div>

                    <button class="btn btn-code" onclick="copyPythonCode()">ğŸ“‹ Kodu Kopyala</button>
                    <button class="btn btn-primary" onclick="downloadPythonCode()">ğŸ’¾ Python DosyasÄ± Ä°ndir</button>

                    <div class="code-block" id="pythonCode"><button class="copy-btn" onclick="copyPythonCode()">Kopyala</button><pre class="python-syntax"># GeliÅŸmiÅŸ TarÄ±msal Faaliyet SimÃ¼lasyonu
# TÃ¼m Python yapÄ±larÄ± iÃ§eren kapsamlÄ± uygulama

import sys
from datetime import datetime

def banner_goster():
    """Uygulama baÅŸlangÄ±Ã§ banner'Ä±nÄ± gÃ¶sterir"""
    print("=" * 80)
    print(" " * 20 + "TARIMSAL FAALÄ°YET SÄ°MÃœLASYONU")
    print(" " * 25 + "Versiyon 2.0 - 2025")
    print("=" * 80)
    print()

def sayisal_giris_al(mesaj, tip="float", min_deger=None, max_deger=None):
    """
    KullanÄ±cÄ±dan sayÄ±sal veri alÄ±r ve doÄŸrulama yapar
    HatalÄ± giriÅŸ durumunda tekrar ister
    """
    while True:
        try:
            girdi = input(mesaj).strip()
            
            if tip == "int":
                deger = int(girdi)
            elif tip == "float":
                deger = float(girdi)
            else:
                deger = float(girdi)
            
            # DeÄŸer aralÄ±ÄŸÄ± kontrolÃ¼
            if min_deger is not None and deger < min_deger:
                print(f"âŒ HATA: DeÄŸer en az {min_deger} olmalÄ±dÄ±r!")
                continue
            
            if max_deger is not None and deger > max_deger:
                print(f"âŒ HATA: DeÄŸer en fazla {max_deger} olmalÄ±dÄ±r!")
                continue
            
            return deger
            
        except ValueError:
            if tip == "int":
                print(f"âŒ HATA: LÃ¼tfen geÃ§erli bir tam sayÄ± giriniz!")
            else:
                print(f"âŒ HATA: LÃ¼tfen geÃ§erli bir sayÄ± giriniz!")
        except Exception as e:
            print(f"âŒ Beklenmeyen hata: {e}")

def evet_hayir_al(mesaj):
    """Boolean dÃ¶ndÃ¼ren evet/hayÄ±r sorusu"""
    while True:
        try:
            cevap = input(mesaj).strip().upper()
            
            if cevap in ["E", "EVET", "Y", "YES"]:
                return True
            elif cevap in ["H", "HAYIR", "N", "NO"]:
                return False
            else:
                print("âŒ HATA: LÃ¼tfen 'E' (Evet) veya 'H' (HayÄ±r) giriniz!")
        except Exception as e:
            print(f"âŒ Beklenmeyen hata: {e}")

def alan_hesapla(uzunluk, genislik):
    """Tarla alanÄ±nÄ± hesaplar (mÂ²)"""
    return float(uzunluk) * float(genislik)

def hektar_donustur(metrekare):
    """Metrekareyi hektara Ã§evirir"""
    return metrekare / 10000.0

def mahsul_secimi_menu():
    """Mahsul seÃ§im menÃ¼sÃ¼nÃ¼ gÃ¶sterir ve seÃ§im alÄ±r"""
    mahsuller = {
        1: {"ad": "BuÄŸday", "hasat_gun": 120, "verim": 450},
        2: {"ad": "MÄ±sÄ±r", "hasat_gun": 90, "verim": 600},
        3: {"ad": "Domates", "hasat_gun": 75, "verim": 800},
        4: {"ad": "Patates", "hasat_gun": 100, "verim": 550},
        5: {"ad": "Arpa", "hasat_gun": 110, "verim": 400},
        6: {"ad": "Pamuk", "hasat_gun": 150, "verim": 350}
    }
    
    while True:
        try:
            print("\n" + "â”€" * 60)
            print("MAHSUL SEÃ‡Ä°M MENÃœSÃœ")
            print("â”€" * 60)
            
            for anahtar, bilgi in mahsuller.items():
                print(f"{anahtar}. {bilgi['ad']:<15} | Hasat SÃ¼resi: {bilgi['hasat_gun']} gÃ¼n | "
                      f"Verim: {bilgi['verim']} kg/dekar")
            
            print("â”€" * 60)
            
            secim = sayisal_giris_al("Mahsul numarasÄ±nÄ± seÃ§iniz (1-6): ", "int", 1, 6)
            
            return mahsuller[secim]
            
        except KeyError:
            print("âŒ HATA: GeÃ§ersiz seÃ§im!")
        except Exception as e:
            print(f"âŒ Beklenmeyen hata: {e}")

def bakim_turu_belirle(gun):
    """
    Switch-case benzeri yapÄ±: Belirli gÃ¼nlerde yapÄ±lacak bakÄ±m iÅŸlemlerini dÃ¶ndÃ¼rÃ¼r
    Python 3.10+ match-case kullanÄ±mÄ±
    """
    # Klasik if-elif-else yapÄ±sÄ± (tÃ¼m Python sÃ¼rÃ¼mleri iÃ§in)
    if gun == 1:
        return "ğŸŒ± Ekim iÅŸlemi ve tohum atÄ±mÄ±"
    elif gun == 5:
        return "ğŸ”¬ Toprak analizi ve pH Ã¶lÃ§Ã¼mÃ¼"
    elif gun == 10:
        return "ğŸ’§ Ä°lk sulama iÅŸlemi"
    elif gun == 15:
        return "ğŸŒ¿ Filizlenme kontrolÃ¼"
    elif gun == 20:
        return "ğŸ§ª Mineral gÃ¼bre uygulamasÄ±"
    elif gun == 30:
        return "ğŸ¦— ZararlÄ± ve haÅŸere kontrolÃ¼"
    elif gun == 40:
        return "ğŸ’¦ YoÄŸun sulama dÃ¶nemi baÅŸlangÄ±cÄ±"
    elif gun == 50:
        return "ğŸŒ¾ Bitki boyu Ã¶lÃ§Ã¼mÃ¼ ve deÄŸerlendirme"
    elif gun == 60:
        return "ğŸ§¬ Organik gÃ¼bre takviyesi"
    elif gun == 70:
        return "ğŸ” HastalÄ±k ve mantar kontrolÃ¼"
    elif gun == 80:
        return "ğŸ’¨ HavalandÄ±rma ve toprak gevÅŸetme"
    elif gun == 90:
        return "ğŸŒ¡ï¸ Ä°klim uyum deÄŸerlendirmesi"
    elif gun == 100:
        return "ğŸ“Š Hasat Ã¶ncesi verim tahmini"
    elif gun == 110:
        return "ğŸšœ Hasat ekipmanlarÄ± hazÄ±rlÄ±ÄŸÄ±"
    elif gun % 7 == 0:  # Her 7 gÃ¼nde bir
        return "ğŸ“‹ HaftalÄ±k genel kontrol ve raporlama"
    else:
        return None

def hasat_kontrolu(mahsul_bilgi, gun):
    """Hasat zamanÄ± gelip gelmediÄŸini kontrol eder - Boolean dÃ¶ndÃ¼rÃ¼r"""
    return gun >= mahsul_bilgi["hasat_gun"]

def verim_hesapla(alan_dekar, mahsul_bilgi, verimlilik_katsayisi):
    """Toplam verimi hesaplar"""
    return alan_dekar * mahsul_bilgi["verim"] * verimlilik_katsayisi

def hava_durumu_simulasyon(gun):
    """
    Hava durumu simÃ¼lasyonu yapar
    String deÄŸerler dÃ¶ndÃ¼rÃ¼r
    """
    # GÃ¼n sayÄ±sÄ±na gÃ¶re basit hava durumu simulasyonu
    hava_kodu = gun % 5
    
    if hava_kodu == 0:
        return "â˜€ï¸ GÃ¼neÅŸli", 1.0
    elif hava_kodu == 1:
        return "â›… ParÃ§alÄ± Bulutlu", 0.95
    elif hava_kodu == 2:
        return "â˜ï¸ Bulutlu", 0.9
    elif hava_kodu == 3:
        return "ğŸŒ§ï¸ YaÄŸmurlu", 0.85
    else:
        return "â›ˆï¸ FÄ±rtÄ±nalÄ±", 0.75

def tarla_bilgileri_al():
    """Tarla bilgilerini kullanÄ±cÄ±dan alÄ±r"""
    print("\n" + "=" * 60)
    print("TARLA BÄ°LGÄ°LERÄ° GÄ°RÄ°ÅÄ°")
    print("=" * 60)
    
    while True:
        try:
            uzunluk = sayisal_giris_al("TarlanÄ±n uzunluÄŸunu metre cinsinden giriniz: ", 
                                       "float", min_deger=1.0)
            genislik = sayisal_giris_al("TarlanÄ±n geniÅŸliÄŸini metre cinsinden giriniz: ", 
                                        "float", min_deger=1.0)
            
            alan_m2 = alan_hesapla(uzunluk, genislik)
            alan_dekar = alan_m2 / 1000.0  # 1 dekar = 1000 mÂ²
            alan_hektar = hektar_donustur(alan_m2)
            
            print(f"\nğŸ“ Tarla Ã–lÃ§Ã¼leri:")
            print(f"   â€¢ Alan: {alan_m2:.2f} mÂ²")
            print(f"   â€¢ Alan: {alan_dekar:.2f} dekar")
            print(f"   â€¢ Alan: {alan_hektar:.4f} hektar")
            
            onay = evet_hayir_al("\nBu bilgiler doÄŸru mu? (E/H): ")
            
            if onay:
                return uzunluk, genislik, alan_m2, alan_dekar, alan_hektar
            else:
                print("\nğŸ”„ Bilgiler yeniden alÄ±nÄ±yor...\n")
                
        except Exception as e:
            print(f"âŒ Hata oluÅŸtu: {e}")

def simulasyon_hizi_sec():
    """SimÃ¼lasyon hÄ±zÄ±nÄ± seÃ§er"""
    print("\n" + "â”€" * 60)
    print("SÄ°MÃœLASYON HIZI SEÃ‡Ä°MÄ°")
    print("â”€" * 60)
    print("1. DetaylÄ± (Her gÃ¼n ayrÄ± gÃ¶sterilir)")
    print("2. HÄ±zlÄ± (Sadece Ã¶nemli gÃ¼nler gÃ¶sterilir)")
    print("3. Ã–zet (Sadece haftalÄ±k Ã¶zetler)")
    print("â”€" * 60)
    
    secim = sayisal_giris_al("SeÃ§iminiz (1-3): ", "int", 1, 3)
    
    return secim

def gunluk_simulasyon(mahsul_bilgi, alan_dekar, sim_hizi):
    """
    GÃ¼nlÃ¼k simÃ¼lasyon dÃ¶ngÃ¼sÃ¼
    For dÃ¶ngÃ¼sÃ¼ ve tÃ¼m kontrol yapÄ±larÄ± burada kullanÄ±lÄ±r
    """
    hasat_gunu = mahsul_bilgi["hasat_gun"]
    toplam_verimlilik = 0.0
    gun_sayaci = 0
    hasat_yapildi = False
    haftalik_rapor = []
    
    print(f"\n{'=' * 80}")
    print(f"ğŸŒ¾ {mahsul_bilgi['ad'].upper()} Ä°Ã‡Ä°N SÄ°MÃœLASYON BAÅLIYOR")
    print(f"{'=' * 80}\n")
    
    # Ana simÃ¼lasyon dÃ¶ngÃ¼sÃ¼ - FOR kullanÄ±mÄ±
    for gun in range(1, hasat_gunu + 21):  # Hasat sonrasÄ± 20 gÃ¼n daha
        gun_sayaci += 1
        
        # Hava durumu simÃ¼lasyonu
        hava, verimlilik_etkisi = hava_durumu_simulasyon(gun)
        toplam_verimlilik += verimlilik_etkisi
        
        # BakÄ±m iÅŸlemi kontrolÃ¼
        bakim = bakim_turu_belirle(gun)
        
        # SimÃ¼lasyon hÄ±zÄ±na gÃ¶re gÃ¶sterim - IF-ELIF-ELSE kullanÄ±mÄ±
        goster = False
        
        if sim_hizi == 1:  # DetaylÄ± mod
            goster = True
        elif sim_hizi == 2:  # HÄ±zlÄ± mod
            if bakim or gun % 10 == 0:
                goster = True
        elif sim_hizi == 3:  # Ã–zet mod
            if gun % 7 == 0:
                goster = True
        
        if goster:
            print(f"ğŸ“… GÃ¼n {gun:3d} | {hava:<20} | Verimlilik: {verimlilik_etkisi:.2f}")
            
            if bakim:
                print(f"         â””â”€â¤ {bakim}")
        
        # HaftalÄ±k rapor toplama
        if gun % 7 == 0:
            ort_verimlilik = toplam_verimlilik / 7
            haftalik_rapor.append({
                "hafta": gun // 7,
                "verimlilik": ort_verimlilik
            })
            
            if sim_hizi == 3:
                print(f"   ğŸ“Š Hafta {gun // 7} Ã–zeti - Ortalama Verimlilik: {ort_verimlilik:.2f}")
            
            toplam_verimlilik = 0.0
        
        # Hasat kontrolÃ¼ - Boolean kullanÄ±mÄ±
        hasat_zamani_geldi = hasat_kontrolu(mahsul_bilgi, gun)
        
        if hasat_zamani_geldi and not hasat_yapildi:
            print(f"\n{'ğŸ‰' * 40}")
            print(f"ğŸŒ¾ GÃœN {gun}: HASAT ZAMANI GELDÄ°!")
            print(f"{'ğŸ‰' * 40}\n")
            
            # Verim hesaplama
            ortalama_verimlilik = sum(h["verimlilik"] for h in haftalik_rapor) / len(haftalik_rapor)
            toplam_urun = verim_hesapla(alan_dekar, mahsul_bilgi, ortalama_verimlilik)
            
            print(f"ğŸ“Š HASAT RAPORU:")
            print(f"   â€¢ Mahsul: {mahsul_bilgi['ad']}")
            print(f"   â€¢ Hasat GÃ¼nÃ¼: {gun}")
            print(f"   â€¢ Tarla AlanÄ±: {alan_dekar:.2f} dekar")
            print(f"   â€¢ Ortalama Verimlilik KatsayÄ±sÄ±: {ortalama_verimlilik:.2f}")
            print(f"   â€¢ Toplam ÃœrÃ¼n: {toplam_urun:.2f} kg")
            print(f"   â€¢ Ton Cinsinden: {toplam_urun / 1000:.2f} ton")
            
            hasat_yapildi = True
            
            # Hasat sonrasÄ± 5 gÃ¼n daha devam edip bitir
            devam_et = evet_hayir_al("\nHasat sonrasÄ± 20 gÃ¼nlÃ¼k takibe devam edilsin mi? (E/H): ")
            
            if not devam_et:
                break
    
    print(f"\n{'=' * 80}")
    print(f"âœ… {mahsul_bilgi['ad'].upper()} SÄ°MÃœLASYONU TAMAMLANDI")
    print(f"{'=' * 80}\n")
    
    return hasat_yapildi

def istatistik_goster(tamamlanan_simulasyonlar):
    """Genel istatistikleri gÃ¶sterir"""
    if not tamamlanan_simulasyonlar:
        print("\nâš ï¸ HenÃ¼z tamamlanmÄ±ÅŸ simÃ¼lasyon bulunmuyor.")
        return
    
    print(f"\n{'=' * 80}")
    print("ğŸ“Š GENEL Ä°STATÄ°STÄ°KLER")
    print(f"{'=' * 80}")
    
    toplam_sim = len(tamamlanan_simulasyonlar)
    print(f"âœ“ Toplam Tamamlanan SimÃ¼lasyon: {toplam_sim}")
    
    for idx, sim in enumerate(tamamlanan_simulasyonlar, 1):
        print(f"\n{idx}. SimÃ¼lasyon:")
        print(f"   â€¢ Mahsul: {sim['mahsul']}")
        print(f"   â€¢ Alan: {sim['alan']:.2f} dekar")
        print(f"   â€¢ Durum: {'âœ… Hasat YapÄ±ldÄ±' if sim['hasat'] else 'âŒ Hasat YapÄ±lmadÄ±'}")
    
    print(f"\n{'=' * 80}\n")

def main():
    """Ana program fonksiyonu"""
    banner_goster()
    
    # KullanÄ±cÄ± bilgisi al
    print("HoÅŸ geldiniz! LÃ¼tfen Ã¶nce kendinizi tanÄ±tÄ±n.\n")
    
    while True:
        try:
            kullanici_adi = input("AdÄ±nÄ±z: ").strip()
            
            if len(kullanici_adi) < 2:
                print("âŒ HATA: Ad en az 2 karakter olmalÄ±dÄ±r!")
                continue
            
            if not kullanici_adi.replace(" ", "").isalpha():
                print("âŒ HATA: Ad sadece harflerden oluÅŸmalÄ±dÄ±r!")
                continue
            
            break
            
        except Exception as e:
            print(f"âŒ Hata: {e}")
    
    print(f"\nMerhaba {kullanici_adi}! ğŸ‘‹\n")
    
    # SimÃ¼lasyon geÃ§miÅŸi
    tamamlanan_simulasyonlar = []
    
    # Ana dÃ¶ngÃ¼ - WHILE kullanÄ±mÄ±
    while True:
        try:
            print("\n" + "ğŸŒ¾" * 40)
            print("\nYeni bir simÃ¼lasyon baÅŸlatÄ±lÄ±yor...\n")
            
            # Tarla bilgilerini al
            uzunluk, genislik, alan_m2, alan_dekar, alan_hektar = tarla_bilgileri_al()
            
            # Mahsul seÃ§
            mahsul_bilgi = mahsul_secimi_menu()
            
            # SimÃ¼lasyon hÄ±zÄ± seÃ§
            sim_hizi = simulasyon_hizi_sec()
            
            # Onay al
            print(f"\nğŸ“‹ SÄ°MÃœLASYON Ã–ZETÄ°:")
            print(f"   â€¢ Ã‡iftÃ§i: {kullanici_adi}")
            print(f"   â€¢ Mahsul: {mahsul_bilgi['ad']}")
            print(f"   â€¢ Alan: {alan_dekar:.2f} dekar")
            print(f"   â€¢ Tahmini Hasat SÃ¼resi: {mahsul_bilgi['hasat_gun']} gÃ¼n")
            
            basla = evet_hayir_al("\nSimÃ¼lasyonu baÅŸlatmak istiyor musunuz? (E/H): ")
            
            if not basla:
                print("âŒ SimÃ¼lasyon iptal edildi.")
                continue
            
            # SimÃ¼lasyonu Ã§alÄ±ÅŸtÄ±r
            hasat_durumu = gunluk_simulasyon(mahsul_bilgi, alan_dekar, sim_hizi)
            
            # SimÃ¼lasyon geÃ§miÅŸine ekle
            tamamlanan_simulasyonlar.append({
                "mahsul": mahsul_bilgi["ad"],
                "alan": alan_dekar,
                "hasat": hasat_durumu
            })
            
            # Ä°statistikleri gÃ¶ster
            istatistik_goster(tamamlanan_simulasyonlar)
            
            # Devam kontrolÃ¼
            devam = evet_hayir_al("Yeni bir simÃ¼lasyon baÅŸlatmak ister misiniz? (E/H): ")
            
            if not devam:
                print(f"\n{'ğŸŒ¾' * 40}")
                print(f"\nğŸ‘‹ HoÅŸÃ§a kalÄ±n {kullanici_adi}!")
                print(f"Toplam {len(tamamlanan_simulasyonlar)} simÃ¼lasyon tamamladÄ±nÄ±z.")
                print("\n" + "ğŸŒ¾" * 40 + "\n")
                break
                
        except KeyboardInterrupt:
            print("\n\nâš ï¸ Program kullanÄ±cÄ± tarafÄ±ndan durduruldu.")
            cikis = evet_hayir_al("Ã‡Ä±kmak istediÄŸinize emin misiniz? (E/H): ")
            if cikis:
                print("Ã‡Ä±kÄ±lÄ±yor...")
                sys.exit(0)
        except Exception as e:
            print(f"\nâŒ Beklenmeyen bir hata oluÅŸtu: {e}")
            devam = evet_hayir_al("Programa devam etmek ister misiniz? (E/H): ")
            if not devam:
                break

if __name__ == "__main__":
    try:
        main()
    except Exception as e:
        print(f"\nâŒ Kritik hata: {e}")
        print("Program sonlandÄ±rÄ±lÄ±yor...")
        sys.exit(1)</pre></div>

                    <div class="info-box" style="margin-top: 30px;">
                        <h3>ğŸ¯ Python Kodunun Ä°Ã§erdiÄŸi YapÄ±lar</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div>
                                <h4 style="color: #8B4513; margin-bottom: 8px;">âœ… Veri Tipleri:</h4>
                                <ul style="color: #6B4423; line-height: 1.8;">
                                    <li>int() - Tam sayÄ± dÃ¶nÃ¼ÅŸÃ¼mÃ¼</li>
                                    <li>float() - OndalÄ±klÄ± sayÄ±</li>
                                    <li>str() - String dÃ¶nÃ¼ÅŸÃ¼mÃ¼</li>
                                    <li>bool() - Boolean deÄŸerler</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #8B4513; margin-bottom: 8px;">âœ… Kontrol YapÄ±larÄ±:</h4>
                                <ul style="color: #6B4423; line-height: 1.8;">
                                    <li>if-elif-else</li>
                                    <li>for dÃ¶ngÃ¼sÃ¼</li>
                                    <li>while dÃ¶ngÃ¼sÃ¼</li>
                                    <li>try-except-finally</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #8B4513; margin-bottom: 8px;">âœ… Fonksiyonlar:</h4>
                                <ul style="color: #6B4423; line-height: 1.8;">
                                    <li>def ile tanÄ±mlama</li>
                                    <li>Parametreli fonksiyonlar</li>
                                    <li>Return deÄŸerleri</li>
                                    <li>Docstring kullanÄ±mÄ±</li>
                                </ul>
                            </div>
                            <div>
                                <h4 style="color: #8B4513; margin-bottom: 8px;">âœ… Input Ä°ÅŸlemleri:</h4>
                                <ul style="color: #6B4423; line-height: 1.8;">
                                    <li>input() ile veri alma</li>
                                    <li>Tip kontrolÃ¼ ve validasyon</li>
                                    <li>Hata durumunda tekrar</li>
                                    <li>Min/max deÄŸer kontrolÃ¼</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- YÃ¼kleniyor Modal -->
    <div class="modal" id="loadingModal">
        <div class="modal-content">
            <div class="spinner"></div>
            <h2>SimÃ¼lasyon HazÄ±rlanÄ±yor...</h2>
            <p>LÃ¼tfen bekleyiniz</p>
        </div>
    </div>

    <script>
        // Global deÄŸiÅŸkenler
        let userData = {
            name: '',
            fieldLength: 0,
            fieldWidth: 0,
            areaM2: 0,
            areaDekar: 0,
            areaHektar: 0,
            selectedCrop: null,
            simSpeed: 1,
            simulationHistory: []
        };

        const crops = {
            1: { ad: "BuÄŸday", hasat_gun: 120, verim: 450, icon: "ğŸŒ¾" },
            2: { ad: "MÄ±sÄ±r", hasat_gun: 90, verim: 600, icon: "ğŸŒ½" },
            3: { ad: "Domates", hasat_gun: 75, verim: 800, icon: "ğŸ…" },
            4: { ad: "Patates", hasat_gun: 100, verim: 550, icon: "ğŸ¥”" },
            5: { ad: "Arpa", hasat_gun: 110, verim: 400, icon: "ğŸŒ¾" },
            6: { ad: "Pamuk", hasat_gun: 150, verim: 350, icon: "â˜ï¸" }
        };

        // Sekme deÄŸiÅŸtirme
        function switchTab(tabId) {
            // TÃ¼m sekmeleri gizle
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // TÃ¼m butonlarÄ±n active sÄ±nÄ±fÄ±nÄ± kaldÄ±r
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // SeÃ§ili sekmeyi gÃ¶ster
            document.getElementById(tabId).classList.add('active');
            
            // SeÃ§ili butonu iÅŸaretle
            event.target.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Python kodunu kopyala
        function copyPythonCode() {
            const code = document.getElementById('pythonCode').querySelector('pre').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('âœ… Python kodu panoya kopyalandÄ±!');
            }).catch(err => {
                alert('âŒ Kopyalama hatasÄ±: ' + err);
            });
        }

        // Python kodunu indir
        function downloadPythonCode() {
            const code = document.getElementById('pythonCode').querySelector('pre').textContent;
            const blob = new Blob([code], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tarimsal_simulasyon.py';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // KullanÄ±cÄ± doÄŸrulama
        function validateUser() {
            const userName = document.getElementById('userName').value.trim();
            const errorDiv = document.getElementById('error-user');

            if (userName.length < 2) {
                showError(errorDiv, 'âŒ Ad en az 2 karakter olmalÄ±dÄ±r!');
                return;
            }

            if (!/^[a-zA-ZÄŸÃ¼ÅŸÄ±Ã¶Ã§ÄÃœÅÄ°Ã–Ã‡\s]+$/.test(userName)) {
                showError(errorDiv, 'âŒ Ad sadece harflerden oluÅŸmalÄ±dÄ±r!');
                return;
            }

            userData.name = userName;
            hideError(errorDiv);
            goToSection('section-field');
        }

        // Tarla hesaplama
        function calculateField() {
            const length = parseFloat(document.getElementById('fieldLength').value);
            const width = parseFloat(document.getElementById('fieldWidth').value);
            const errorDiv = document.getElementById('error-field');

            if (!length || length < 1) {
                showError(errorDiv, 'âŒ Uzunluk en az 1 metre olmalÄ±dÄ±r!');
                return;
            }

            if (!width || width < 1) {
                showError(errorDiv, 'âŒ GeniÅŸlik en az 1 metre olmalÄ±dÄ±r!');
                return;
            }

            userData.fieldLength = length;
            userData.fieldWidth = width;
            userData.areaM2 = length * width;
            userData.areaDekar = userData.areaM2 / 1000;
            userData.areaHektar = userData.areaM2 / 10000;

            document.getElementById('areaM2').textContent = userData.areaM2.toFixed(2);
            document.getElementById('areaDekar').textContent = userData.areaDekar.toFixed(2);
            document.getElementById('areaHektar').textContent = userData.areaHektar.toFixed(4);

            document.getElementById('fieldCalculations').style.display = 'block';
            document.getElementById('btnFieldNext').style.display = 'inline-block';
            hideError(errorDiv);
        }

        // Mahsul seÃ§imi
        function selectCrop(cropId) {
            document.querySelectorAll('.mahsul-card').forEach(card => {
                card.classList.remove('selected');
            });

            event.currentTarget.classList.add('selected');
            userData.selectedCrop = cropId;
            document.getElementById('btnCropNext').style.display = 'inline-block';
            hideError(document.getElementById('error-crop'));
        }

        // BÃ¶lÃ¼m geÃ§iÅŸleri
        function goToSection(sectionId) {
            if (sectionId === 'section-crop' && !userData.areaDekar) {
                showError(document.getElementById('error-field'), 'âŒ Ã–nce tarla hesaplamasÄ± yapÄ±nÄ±z!');
                return;
            }

            if (sectionId === 'section-speed' && !userData.selectedCrop) {
                showError(document.getElementById('error-crop'), 'âŒ LÃ¼tfen bir mahsul seÃ§iniz!');
                return;
            }

            if (sectionId === 'section-summary') {
                const speed = document.getElementById('simSpeed').value;
                if (!speed) {
                    showError(document.getElementById('error-speed'), 'âŒ LÃ¼tfen simÃ¼lasyon hÄ±zÄ±nÄ± seÃ§iniz!');
                    return;
                }
                userData.simSpeed = parseInt(speed);
                showSummary();
            }

            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });

            document.getElementById(sectionId).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Ã–zet gÃ¶sterimi
        function showSummary() {
            const crop = crops[userData.selectedCrop];
            const speedText = {
                1: 'DetaylÄ± (Her gÃ¼n)',
                2: 'HÄ±zlÄ± (Ã–nemli gÃ¼nler)',
                3: 'Ã–zet (HaftalÄ±k)'
            };

            const summaryHTML = `
                <p><strong>ğŸ‘¤ Ã‡iftÃ§i:</strong> ${userData.name}</p>
                <p><strong>${crop.icon} Mahsul:</strong> ${crop.ad}</p>
                <p><strong>ğŸ“ Alan:</strong> ${userData.areaDekar.toFixed(2)} dekar (${userData.areaM2.toFixed(2)} mÂ²)</p>
                <p><strong>â±ï¸ Tahmini Hasat:</strong> ${crop.hasat_gun} gÃ¼n</p>
                <p><strong>âš¡ HÄ±z:</strong> ${speedText[userData.simSpeed]}</p>
                <p><strong>ğŸ“Š Tahmini Verim:</strong> ${(userData.areaDekar * crop.verim).toFixed(2)} kg</p>
            `;

            document.getElementById('summaryContent').innerHTML = summaryHTML;
        }

        // SimÃ¼lasyonu baÅŸlat
        async function startSimulation() {
            goToSection('section-simulation');
            document.getElementById('loadingModal').classList.add('active');

            await new Promise(resolve => setTimeout(resolve, 1500));
            document.getElementById('loadingModal').classList.remove('active');

            runSimulation();
        }

        // Ana simÃ¼lasyon fonksiyonu
        async function runSimulation() {
            const crop = crops[userData.selectedCrop];
            const output = document.getElementById('simulationOutput');
            const progressBar = document.getElementById('progressBar');
            const weatherWidget = document.getElementById('currentWeather');
            
            output.innerHTML = '';
            weatherWidget.style.display = 'flex';

            let totalVerimlilik = 0;
            let gunSayaci = 0;
            let haftalikRapor = [];

            appendOutput('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
            appendOutput(`ğŸŒ¾ ${crop.ad.toUpperCase()} Ä°Ã‡Ä°N SÄ°MÃœLASYON BAÅLIYOR\n`);
            appendOutput('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n');

            const maxGun = crop.hasat_gun + 20;

            for (let gun = 1; gun <= maxGun; gun++) {
                gunSayaci++;
                
                const progress = (gun / maxGun) * 100;
                progressBar.style.width = progress + '%';
                progressBar.textContent = Math.round(progress) + '%';

                const [hava, havaDurumu, verimlilik] = getWeather(gun);
                totalVerimlilik += verimlilik;

                updateWeatherWidget(hava, havaDurumu, gun, verimlilik);

                const bakim = getBakim(gun);

                let goster = false;
                if (userData.simSpeed === 1) {
                    goster = true;
                } else if (userData.simSpeed === 2) {
                    if (bakim || gun % 10 === 0) goster = true;
                } else if (userData.simSpeed === 3) {
                    if (gun % 7 === 0) goster = true;
                }

                if (goster) {
                    appendOutput(`ğŸ“… GÃ¼n ${gun.toString().padStart(3)} | ${havaDurumu.padEnd(20)} | Verimlilik: ${verimlilik.toFixed(2)}\n`);
                    
                    if (bakim) {
                        appendOutput(`         â””â”€â¤ ${bakim}\n`);
                    }
                }

                if (gun % 7 === 0) {
                    const ortVerimlilik = totalVerimlilik / 7;
                    haftalikRapor.push({
                        hafta: Math.floor(gun / 7),
                        verimlilik: ortVerimlilik
                    });

                    if (userData.simSpeed === 3) {
                        appendOutput(`   ğŸ“Š Hafta ${Math.floor(gun / 7)} Ã–zeti - Ortalama Verimlilik: ${ortVerimlilik.toFixed(2)}\n`);
                    }

                    totalVerimlilik = 0;
                }

                if (gun >= crop.hasat_gun && gun === crop.hasat_gun) {
                    appendOutput('\n' + 'ğŸ‰'.repeat(40) + '\n');
                    appendOutput(`ğŸŒ¾ GÃœN ${gun}: HASAT ZAMANI GELDÄ°!\n`);
                    appendOutput('ğŸ‰'.repeat(40) + '\n\n');

                    const ortVerimlilik = haftalikRapor.reduce((sum, h) => sum + h.verimlilik, 0) / haftalikRapor.length;
                    const toplamUrun = userData.areaDekar * crop.verim * ortVerimlilik;

                    appendOutput('ğŸ“Š HASAT RAPORU:\n');
                    appendOutput(`   â€¢ Mahsul: ${crop.ad}\n`);
                    appendOutput(`   â€¢ Hasat GÃ¼nÃ¼: ${gun}\n`);
                    appendOutput(`   â€¢ Tarla AlanÄ±: ${userData.areaDekar.toFixed(2)} dekar\n`);
                    appendOutput(`   â€¢ Ortalama Verimlilik KatsayÄ±sÄ±: ${ortVerimlilik.toFixed(2)}\n`);
                    appendOutput(`   â€¢ Toplam ÃœrÃ¼n: ${toplamUrun.toFixed(2)} kg\n`);
                    appendOutput(`   â€¢ Ton Cinsinden: ${(toplamUrun / 1000).toFixed(2)} ton\n\n`);

                    showHarvestResult(crop, gun, toplamUrun, ortVerimlilik);

                    userData.simulationHistory.push({
                        mahsul: crop.ad,
                        alan: userData.areaDekar,
                        hasat: true,
                        urun: toplamUrun,
                        gun: gun,
                        tarih: new Date().toLocaleString('tr-TR')
                    });

                    break;
                }

                if (userData.simSpeed === 1) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                } else if (userData.simSpeed === 2) {
                    await new Promise(resolve => setTimeout(resolve, 50));
                } else {
                    await new Promise(resolve => setTimeout(resolve, 20));
                }
            }

            appendOutput('\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
            appendOutput(`âœ… ${crop.ad.toUpperCase()} SÄ°MÃœLASYONU TAMAMLANDI\n`);
            appendOutput('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n');
        }

        function getWeather(gun) {
            const havalar = [
                ['â˜€ï¸', 'â˜€ï¸ GÃ¼neÅŸli', 1.0],
                ['â›…', 'â›… ParÃ§alÄ± Bulutlu', 0.95],
                ['â˜ï¸', 'â˜ï¸ Bulutlu', 0.9],
                ['ğŸŒ§ï¸', 'ğŸŒ§ï¸ YaÄŸmurlu', 0.85],
                ['â›ˆï¸', 'â›ˆï¸ FÄ±rtÄ±nalÄ±', 0.75]
            ];
            return havalar[gun % 5];
        }

        function updateWeatherWidget(icon, desc, gun, verimlilik) {
            document.getElementById('weatherIcon').textContent = icon;
            document.getElementById('weatherDesc').textContent = desc;
            document.getElementById('weatherDay').textContent = `GÃ¼n: ${gun}`;
            document.getElementById('weatherEffect').textContent = `Verimlilik: ${(verimlilik * 100).toFixed(0)}%`;
        }

        function getBakim(gun) {
            const bakimlar = {
                1: "ğŸŒ± Ekim iÅŸlemi ve tohum atÄ±mÄ±",
                5: "ğŸ”¬ Toprak analizi ve pH Ã¶lÃ§Ã¼mÃ¼",
                10: "ğŸ’§ Ä°lk sulama iÅŸlemi",
                15: "ğŸŒ¿ Filizlenme kontrolÃ¼",
                20: "ğŸ§ª Mineral gÃ¼bre uygulamasÄ±",
                30: "ğŸ¦— ZararlÄ± ve haÅŸere kontrolÃ¼",
                40: "ğŸ’¦ YoÄŸun sulama dÃ¶nemi baÅŸlangÄ±cÄ±",
                50: "ğŸŒ¾ Bitki boyu Ã¶lÃ§Ã¼mÃ¼ ve deÄŸerlendirme",
                60: "ğŸ§¬ Organik gÃ¼bre takviyesi",
                70: "ğŸ” HastalÄ±k ve mantar kontrolÃ¼",
                80: "ğŸ’¨ HavalandÄ±rma ve toprak gevÅŸetme",
                90: "ğŸŒ¡ï¸ Ä°klim uyum deÄŸerlendirmesi",
                100: "ğŸ“Š Hasat Ã¶ncesi verim tahmini",
                110: "ğŸšœ Hasat ekipmanlarÄ± hazÄ±rlÄ±ÄŸÄ±"
            };

            if (bakimlar[gun]) return bakimlar[gun];
            if (gun % 7 === 0) return "ğŸ“‹ HaftalÄ±k genel kontrol ve raporlama";
            return null;
        }

        function showHarvestResult(crop, gun, toplamUrun, verimlilik) {
            const detailsHTML = `
                <p><strong>${crop.icon} Mahsul:</strong> ${crop.ad}</p>
                <p><strong>ğŸ“… Hasat GÃ¼nÃ¼:</strong> ${gun}</p>
                <p><strong>ğŸ“ Tarla:</strong> ${userData.areaDekar.toFixed(2)} dekar</p>
                <p><strong>âš¡ Verimlilik:</strong> ${(verimlilik * 100).toFixed(1)}%</p>
                <p><strong>ğŸ¯ Toplam ÃœrÃ¼n:</strong> ${toplamUrun.toFixed(2)} kg (${(toplamUrun / 1000).toFixed(2)} ton)</p>
                <p><strong>ğŸ’° Tahmini DeÄŸer:</strong> ${(toplamUrun * 5).toLocaleString('tr-TR')} â‚º</p>
            `;

            document.getElementById('harvestDetails').innerHTML = detailsHTML;
            document.getElementById('harvestResult').style.display = 'block';
        }

        function goToStats() {
            if (userData.simulationHistory.length === 0) {
                return;
            }

            let statsHTML = `
                <div class="info-box">
                    <h3>ğŸ“Š Toplam Ä°statistikler</h3>
                    <p><strong>Toplam SimÃ¼lasyon:</strong> ${userData.simulationHistory.length}</p>
                </div>
                <h3 style="color: #8B4513; margin: 20px 0;">SimÃ¼lasyon GeÃ§miÅŸi:</h3>
            `;

            userData.simulationHistory.forEach((sim, index) => {
                statsHTML += `
                    <div class="history-item">
                        <h4>${index + 1}. ${sim.mahsul} - ${sim.tarih}</h4>
                        <p><strong>Alan:</strong> ${sim.alan.toFixed(2)} dekar</p>
                        <p><strong>ÃœrÃ¼n:</strong> ${sim.urun.toFixed(2)} kg (${(sim.urun / 1000).toFixed(2)} ton)</p>
                        <p><strong>SÃ¼re:</strong> ${sim.gun} gÃ¼n</p>
                        <span class="badge badge-success">âœ… Hasat YapÄ±ldÄ±</span>
                    </div>
                `;
            });

            document.getElementById('statsContent').innerHTML = statsHTML;
            goToSection('section-stats');
        }

        function resetSimulation() {
            document.getElementById('userName').value = '';
            document.getElementById('fieldLength').value = '';
            document.getElementById('fieldWidth').value = '';
            document.getElementById('simSpeed').value = '';
            
            document.getElementById('fieldCalculations').style.display = 'none';
            document.getElementById('btnFieldNext').style.display = 'none';
            document.getElementById('btnCropNext').style.display = 'none';
            document.getElementById('simulationOutput').innerHTML = '';
            document.getElementById('harvestResult').style.display = 'none';
            document.getElementById('currentWeather').style.display = 'none';
            
            document.querySelectorAll('.mahsul-card').forEach(card => {
                card.classList.remove('selected');
            });

            const name = userData.name;
            const history = userData.simulationHistory;
            
            userData = {
                name: name,
                fieldLength: 0,
                fieldWidth: 0,
                areaM2: 0,
                areaDekar: 0,
                areaHektar: 0,
                selectedCrop: null,
                simSpeed: 1,
                simulationHistory: history
            };

            document.getElementById('userName').value = name;
            goToSection('section-field');
        }

        function appendOutput(text) {
            const output = document.getElementById('simulationOutput');
            output.innerHTML += text;
            output.scrollTop = output.scrollHeight;
        }

        function showError(element, message) {
            element.textContent = message;
            element.style.display = 'block';
        }

        function hideError(element) {
            element.style.display = 'none';
        }

        window.onload = function() {
            console.log('ğŸŒ¾ TarÄ±msal Faaliyet SimÃ¼lasyonu hazÄ±r!');
        };
    </script>
</body>
</html>